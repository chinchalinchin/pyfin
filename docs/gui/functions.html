<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>scrilla.gui.functions API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>scrilla.gui.functions</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># This file is part of scrilla: https://github.com/chinchalinchin/scrilla.

# scrilla is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 3
# as published by the Free Software Foundation.

# scrilla is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with scrilla.  If not, see &lt;https://www.gnu.org/licenses/&gt;
# or &lt;https://github.com/chinchalinchin/scrilla/blob/develop/main/LICENSE&gt;.

import time

from PyQt5 import Qt, QtCore, QtWidgets

from scrilla import settings
from scrilla.static.constants import constants
import scrilla.analysis.models.geometric.statistics as statistics
import scrilla.analysis.optimizer as optimizer
import scrilla.analysis.objects.portfolio as portfolio

from scrilla.util import outputter, helper, plotter

from scrilla.gui import formats
from scrilla.gui.widgets import CompositeWidget, GraphWidget, \
                            TableWidget, PortfolioWidget

logger = outputter.Logger(&#39;gui.functions&#39;, settings.LOG_LEVEL)

class RiskReturnWidget(CompositeWidget):
    def __init__(self):
        super().__init__(widget_title=&#34;Risk-Return Profile Over Last 100 Days&#34;, button_msg=&#34;Calculate Profile&#34;, 
                            calculate_function=self.calculate, display_function=self.display)

    @QtCore.Slot()
    def calculate(self):
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        no_symbols = len(user_symbols)

        self.table.setRowCount(no_symbols)
        self.table.setColumnCount(2)
        self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
        self.table.setHorizontalHeaderLabels([&#39;Risk&#39;,&#39;Return&#39;])
        self.table.horizontalHeader().setStretchLastSection(True)
        self.table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
        self.table.setVerticalHeaderLabels(user_symbols)

        for symbol in user_symbols:
            logger.debug(f&#39;Calculating {symbol} Risk-Return Profile&#39;)
            stats = statistics.calculate_moment_risk_return(symbol)
            if stats:
                formatted_ret = str(100*stats[&#39;annual_return&#39;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                formatted_vol = str(100*stats[&#39;annual_volatility&#39;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                
                logger.debug(f&#39;(return, vol)_{symbol} = ({formatted_ret}, {formatted_vol})&#39;)

                ret_item = QtWidgets.QTableWidgetItem(formatted_ret)
                ret_item.setTextAlignment(QtCore.Qt.AlignHCenter)
                vol_item = QtWidgets.QTableWidgetItem(formatted_vol)
                vol_item.setTextAlignment(QtCore.Qt.AlignHCenter)
                
                self.table.setItem(user_symbols.index(symbol), 0, vol_item)
                self.table.setItem(user_symbols.index(symbol), 1, ret_item)
            else: 
                self.error_message.show()
                return False

        self.table.resizeColumnsToContents()
        self.table.show()
    
    @QtCore.Slot()
    def display(self):
        if self.displayed:
            self.layout.removeWidget(self.figure)
            self.figure.deleteLater()
            self.figure = None
            time.sleep(1)
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        profiles = []
        for symbol in user_symbols:
            profiles.append(statistics.calculate_moment_risk_return(symbol))

        figure = plotter.plot_profiles(symbols=user_symbols, profiles=profiles, show=False)
        self.figure = figure
        self.right_layout.insertWidget(1, self.figure, 1)
        self.displayed = True


class CorrelationWidget(TableWidget):
    def __init__(self):
        super().__init__(widget_title = &#34;Correlation Over Last 100 Days&#34;, button_msg=&#34;Calculate Correlation&#34;,
                            table_function = self.calculate_table)

    @QtCore.Slot()
    def calculate_table(self):
        if self.table.isVisible():
            logger.debug(&#39;Clearing correlation matrix from table widget.&#39;)
            self.table.clear()

        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        no_symbols = len(user_symbols)

        if no_symbols &gt; 1:
            self.table.setRowCount(no_symbols)
            self.table.setColumnCount(no_symbols)
            self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
            self.table.setHorizontalHeaderLabels(user_symbols)
            #self.table.horizontalHeader().setStretchLastSection(True)
            self.table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
            self.table.setVerticalHeaderLabels(user_symbols)

            for i, value in enumerate(user_symbols):
                for j in range(i, len(user_symbols)):
                    if i == j:
                        item = QtWidgets.QTableWidgetItem(&#34;100.0%&#34;)
                        item.setTextAlignment(QtCore.Qt.AlignHCenter)
                        self.table.setItem(i, j, item)
                        
                    else:    
                        logger.debug(f&#39;Calculating correlation for ({value}, {user_symbols[j]})&#39;)
                        correlation = statistics.calculate_moment_correlation(value, user_symbols[j])
                        formatted_correlation = str(100*correlation[&#34;correlation&#34;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                        item_1 = QtWidgets.QTableWidgetItem(formatted_correlation)
                        item_1.setTextAlignment(QtCore.Qt.AlignHCenter)
                        item_2 = QtWidgets.QTableWidgetItem(formatted_correlation)
                        item_2.setTextAlignment(QtCore.Qt.AlignHCenter)

                        logger.debug(f&#39;Appending correlation = {formatted_correlation} to ({i}, {j}) and ({j}, {i}) entries of matrix&#39;)
                        self.table.setItem(j, i, item_1)
                        self.table.setItem(i, j, item_2)
        else:
            self.table.setRowCount(1)
            self.table.setColumnCount(1)
            self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
            self.table.setHorizontalHeaderLabels([&#34;Error, Will Robinson&#34;])
            self.table.horizontalHeader().setStretchLastSection(True)
            error_item = QtWidgets.QTableWidgetItem(&#34;Error Occurred. Check Input and Try Again.&#34;)
            error_item.setTextAlignment(Qt.AlignHCenter)
            self.table.setItem(0, 0, error_item)

        self.table.resizeColumnsToContents()
        self.table.show()

class OptimizerWidget(PortfolioWidget):
    def __init__(self):
        super().__init__(widget_title=&#34;Portfolio Allocation Optimization&#34;,
                            min_function=self.minimize, opt_function=self.optimize)


    @QtCore.Slot()
    def minimize(self):
        if self.result_table.isVisible():
            self.reset_table()

        if self.result.isVisible():
            self.result.clear()

        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        no_symbols = len(user_symbols)

        if no_symbols &gt; 1:
            investment = self.portfolio_value.text()

            logger.debug(f&#39;Optimizing Portfolio : {user_symbols}.&#39;)
            this_portfolio = portfolio.Portfolio(tickers=user_symbols)
            allocation = optimizer.optimize_portfolio_variance(portfolio=this_portfolio)
            
            logger.debug(formats.format_allocation_profile_title(allocation, this_portfolio))
            self.result.setText(formats.format_allocation_profile_title(allocation, this_portfolio))

            self.result_table.setRowCount(no_symbols)
            self.result_table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
            self.result_table.setVerticalHeaderLabels(user_symbols)
            
            if not investment:
                self.result_table.setColumnCount(1)
                labels = [&#39;Allocation&#39;]
            else:
                self.result_table.setColumnCount(2)
                labels = [&#39;Allocation&#39;, &#39;Shares&#39;]
                shares = this_portfolio.calculate_approximate_shares(allocation, float(investment))

            self.result_table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
            self.result_table.setHorizontalHeaderLabels(labels)
            self.result_table.horizontalHeader().setStretchLastSection(True)


            for i in range(no_symbols):
                this_allocation = allocation[i]
                formatted_allocation = str(100*this_allocation)[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                item = QtWidgets.QTableWidgetItem(formatted_allocation)
                item.setTextAlignment(QtCore.Qt.AlignHCenter)
                self.result_table.setItem(i, 0, item)
                if investment:
                    share_item = QtWidgets.QTableWidgetItem(str(shares[i]))
                    share_item.setTextAlignment(QtCore.Qt.AlignHCenter)
                    self.result_table.setItem(i, 1, share_item)
            
            self.result_table.resizeColumnsToContents()
            self.result_table.show()
            self.result.show()
        
        else:
            self.result.setText(&#34;Error Occurred. Check Input and Try Again.&#34;)
            self.result.show()

    # TODO: combine with minimize function
    @QtCore.Slot()
    def optimize(self):
        pass

class EfficientFrontierWidget(GraphWidget):
    def __init__(self):
        super().__init__(widget_title = &#34;Efficient Portfolio Frontier Plot&#34;, button_msg=&#34;Calculate Efficient Frontier&#34;,
                            display_function=self.display)

    @QtCore.Slot()
    def display(self):
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        this_portfolio = portfolio.Portfolio(tickers=user_symbols)
        # TODO: DATES!
        frontier = optimizer.calculate_efficient_frontier(portfolio=portfolio)
        figure = plotter.plot_frontier(portfolio=this_portfolio, frontier=frontier, show=False)
        self.figure = figure
        self.layout.insertWidget(1, self.figure, 1)
        self.displayed = True 

class MovingAverageWidget(GraphWidget):
    def __init__(self):
        super().__init__(widget_title = &#34;Rolling Moving Average Plot&#34;, button_msg=&#34;Calculate MAs&#34;,
                            display_function=self.display)
        
    @QtCore.Slot()
    def display(self):
        if self.displayed:
            self.layout.removeWidget(self.figure)
            self.figure.deleteLater()
            self.figure = None
            time.sleep(1)
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        moving_averages = statistics.calculate_moving_averages(user_symbols)
        periods = [settings.MA_1_PERIOD, settings.MA_2_PERIOD, settings.MA_3_PERIOD]
        figure = plotter.plot_moving_averages(symbols=user_symbols, averages_output=moving_averages, 
                                                periods=periods, show=False)
        self.figure = figure
        self.layout.insertWidget(1, self.figure, 1)
        self.displayed = True</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="scrilla.gui.functions.CorrelationWidget"><code class="flex name class">
<span>class <span class="ident">CorrelationWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CorrelationWidget(TableWidget):
    def __init__(self):
        super().__init__(widget_title = &#34;Correlation Over Last 100 Days&#34;, button_msg=&#34;Calculate Correlation&#34;,
                            table_function = self.calculate_table)

    @QtCore.Slot()
    def calculate_table(self):
        if self.table.isVisible():
            logger.debug(&#39;Clearing correlation matrix from table widget.&#39;)
            self.table.clear()

        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        no_symbols = len(user_symbols)

        if no_symbols &gt; 1:
            self.table.setRowCount(no_symbols)
            self.table.setColumnCount(no_symbols)
            self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
            self.table.setHorizontalHeaderLabels(user_symbols)
            #self.table.horizontalHeader().setStretchLastSection(True)
            self.table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
            self.table.setVerticalHeaderLabels(user_symbols)

            for i, value in enumerate(user_symbols):
                for j in range(i, len(user_symbols)):
                    if i == j:
                        item = QtWidgets.QTableWidgetItem(&#34;100.0%&#34;)
                        item.setTextAlignment(QtCore.Qt.AlignHCenter)
                        self.table.setItem(i, j, item)
                        
                    else:    
                        logger.debug(f&#39;Calculating correlation for ({value}, {user_symbols[j]})&#39;)
                        correlation = statistics.calculate_moment_correlation(value, user_symbols[j])
                        formatted_correlation = str(100*correlation[&#34;correlation&#34;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                        item_1 = QtWidgets.QTableWidgetItem(formatted_correlation)
                        item_1.setTextAlignment(QtCore.Qt.AlignHCenter)
                        item_2 = QtWidgets.QTableWidgetItem(formatted_correlation)
                        item_2.setTextAlignment(QtCore.Qt.AlignHCenter)

                        logger.debug(f&#39;Appending correlation = {formatted_correlation} to ({i}, {j}) and ({j}, {i}) entries of matrix&#39;)
                        self.table.setItem(j, i, item_1)
                        self.table.setItem(i, j, item_2)
        else:
            self.table.setRowCount(1)
            self.table.setColumnCount(1)
            self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
            self.table.setHorizontalHeaderLabels([&#34;Error, Will Robinson&#34;])
            self.table.horizontalHeader().setStretchLastSection(True)
            error_item = QtWidgets.QTableWidgetItem(&#34;Error Occurred. Check Input and Try Again.&#34;)
            error_item.setTextAlignment(Qt.AlignHCenter)
            self.table.setItem(0, 0, error_item)

        self.table.resizeColumnsToContents()
        self.table.show()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="scrilla.gui.widgets.TableWidget" href="widgets.html#scrilla.gui.widgets.TableWidget">TableWidget</a></li>
<li><a title="scrilla.gui.widgets.SymbolWidget" href="widgets.html#scrilla.gui.widgets.SymbolWidget">SymbolWidget</a></li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="scrilla.gui.functions.CorrelationWidget.calculate_table"><code class="name flex">
<span>def <span class="ident">calculate_table</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@QtCore.Slot()
def calculate_table(self):
    if self.table.isVisible():
        logger.debug(&#39;Clearing correlation matrix from table widget.&#39;)
        self.table.clear()

    user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
    no_symbols = len(user_symbols)

    if no_symbols &gt; 1:
        self.table.setRowCount(no_symbols)
        self.table.setColumnCount(no_symbols)
        self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
        self.table.setHorizontalHeaderLabels(user_symbols)
        #self.table.horizontalHeader().setStretchLastSection(True)
        self.table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
        self.table.setVerticalHeaderLabels(user_symbols)

        for i, value in enumerate(user_symbols):
            for j in range(i, len(user_symbols)):
                if i == j:
                    item = QtWidgets.QTableWidgetItem(&#34;100.0%&#34;)
                    item.setTextAlignment(QtCore.Qt.AlignHCenter)
                    self.table.setItem(i, j, item)
                    
                else:    
                    logger.debug(f&#39;Calculating correlation for ({value}, {user_symbols[j]})&#39;)
                    correlation = statistics.calculate_moment_correlation(value, user_symbols[j])
                    formatted_correlation = str(100*correlation[&#34;correlation&#34;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                    item_1 = QtWidgets.QTableWidgetItem(formatted_correlation)
                    item_1.setTextAlignment(QtCore.Qt.AlignHCenter)
                    item_2 = QtWidgets.QTableWidgetItem(formatted_correlation)
                    item_2.setTextAlignment(QtCore.Qt.AlignHCenter)

                    logger.debug(f&#39;Appending correlation = {formatted_correlation} to ({i}, {j}) and ({j}, {i}) entries of matrix&#39;)
                    self.table.setItem(j, i, item_1)
                    self.table.setItem(i, j, item_2)
    else:
        self.table.setRowCount(1)
        self.table.setColumnCount(1)
        self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
        self.table.setHorizontalHeaderLabels([&#34;Error, Will Robinson&#34;])
        self.table.horizontalHeader().setStretchLastSection(True)
        error_item = QtWidgets.QTableWidgetItem(&#34;Error Occurred. Check Input and Try Again.&#34;)
        error_item.setTextAlignment(Qt.AlignHCenter)
        self.table.setItem(0, 0, error_item)

    self.table.resizeColumnsToContents()
    self.table.show()</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="scrilla.gui.functions.EfficientFrontierWidget"><code class="flex name class">
<span>class <span class="ident">EfficientFrontierWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class EfficientFrontierWidget(GraphWidget):
    def __init__(self):
        super().__init__(widget_title = &#34;Efficient Portfolio Frontier Plot&#34;, button_msg=&#34;Calculate Efficient Frontier&#34;,
                            display_function=self.display)

    @QtCore.Slot()
    def display(self):
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        this_portfolio = portfolio.Portfolio(tickers=user_symbols)
        # TODO: DATES!
        frontier = optimizer.calculate_efficient_frontier(portfolio=portfolio)
        figure = plotter.plot_frontier(portfolio=this_portfolio, frontier=frontier, show=False)
        self.figure = figure
        self.layout.insertWidget(1, self.figure, 1)
        self.displayed = True </code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="scrilla.gui.widgets.GraphWidget" href="widgets.html#scrilla.gui.widgets.GraphWidget">GraphWidget</a></li>
<li><a title="scrilla.gui.widgets.SymbolWidget" href="widgets.html#scrilla.gui.widgets.SymbolWidget">SymbolWidget</a></li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="scrilla.gui.functions.EfficientFrontierWidget.display"><code class="name flex">
<span>def <span class="ident">display</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@QtCore.Slot()
def display(self):
    user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
    this_portfolio = portfolio.Portfolio(tickers=user_symbols)
    # TODO: DATES!
    frontier = optimizer.calculate_efficient_frontier(portfolio=portfolio)
    figure = plotter.plot_frontier(portfolio=this_portfolio, frontier=frontier, show=False)
    self.figure = figure
    self.layout.insertWidget(1, self.figure, 1)
    self.displayed = True </code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="scrilla.gui.functions.MovingAverageWidget"><code class="flex name class">
<span>class <span class="ident">MovingAverageWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MovingAverageWidget(GraphWidget):
    def __init__(self):
        super().__init__(widget_title = &#34;Rolling Moving Average Plot&#34;, button_msg=&#34;Calculate MAs&#34;,
                            display_function=self.display)
        
    @QtCore.Slot()
    def display(self):
        if self.displayed:
            self.layout.removeWidget(self.figure)
            self.figure.deleteLater()
            self.figure = None
            time.sleep(1)
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        moving_averages = statistics.calculate_moving_averages(user_symbols)
        periods = [settings.MA_1_PERIOD, settings.MA_2_PERIOD, settings.MA_3_PERIOD]
        figure = plotter.plot_moving_averages(symbols=user_symbols, averages_output=moving_averages, 
                                                periods=periods, show=False)
        self.figure = figure
        self.layout.insertWidget(1, self.figure, 1)
        self.displayed = True</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="scrilla.gui.widgets.GraphWidget" href="widgets.html#scrilla.gui.widgets.GraphWidget">GraphWidget</a></li>
<li><a title="scrilla.gui.widgets.SymbolWidget" href="widgets.html#scrilla.gui.widgets.SymbolWidget">SymbolWidget</a></li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="scrilla.gui.functions.MovingAverageWidget.display"><code class="name flex">
<span>def <span class="ident">display</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@QtCore.Slot()
def display(self):
    if self.displayed:
        self.layout.removeWidget(self.figure)
        self.figure.deleteLater()
        self.figure = None
        time.sleep(1)
    user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
    moving_averages = statistics.calculate_moving_averages(user_symbols)
    periods = [settings.MA_1_PERIOD, settings.MA_2_PERIOD, settings.MA_3_PERIOD]
    figure = plotter.plot_moving_averages(symbols=user_symbols, averages_output=moving_averages, 
                                            periods=periods, show=False)
    self.figure = figure
    self.layout.insertWidget(1, self.figure, 1)
    self.displayed = True</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="scrilla.gui.functions.OptimizerWidget"><code class="flex name class">
<span>class <span class="ident">OptimizerWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OptimizerWidget(PortfolioWidget):
    def __init__(self):
        super().__init__(widget_title=&#34;Portfolio Allocation Optimization&#34;,
                            min_function=self.minimize, opt_function=self.optimize)


    @QtCore.Slot()
    def minimize(self):
        if self.result_table.isVisible():
            self.reset_table()

        if self.result.isVisible():
            self.result.clear()

        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        no_symbols = len(user_symbols)

        if no_symbols &gt; 1:
            investment = self.portfolio_value.text()

            logger.debug(f&#39;Optimizing Portfolio : {user_symbols}.&#39;)
            this_portfolio = portfolio.Portfolio(tickers=user_symbols)
            allocation = optimizer.optimize_portfolio_variance(portfolio=this_portfolio)
            
            logger.debug(formats.format_allocation_profile_title(allocation, this_portfolio))
            self.result.setText(formats.format_allocation_profile_title(allocation, this_portfolio))

            self.result_table.setRowCount(no_symbols)
            self.result_table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
            self.result_table.setVerticalHeaderLabels(user_symbols)
            
            if not investment:
                self.result_table.setColumnCount(1)
                labels = [&#39;Allocation&#39;]
            else:
                self.result_table.setColumnCount(2)
                labels = [&#39;Allocation&#39;, &#39;Shares&#39;]
                shares = this_portfolio.calculate_approximate_shares(allocation, float(investment))

            self.result_table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
            self.result_table.setHorizontalHeaderLabels(labels)
            self.result_table.horizontalHeader().setStretchLastSection(True)


            for i in range(no_symbols):
                this_allocation = allocation[i]
                formatted_allocation = str(100*this_allocation)[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                item = QtWidgets.QTableWidgetItem(formatted_allocation)
                item.setTextAlignment(QtCore.Qt.AlignHCenter)
                self.result_table.setItem(i, 0, item)
                if investment:
                    share_item = QtWidgets.QTableWidgetItem(str(shares[i]))
                    share_item.setTextAlignment(QtCore.Qt.AlignHCenter)
                    self.result_table.setItem(i, 1, share_item)
            
            self.result_table.resizeColumnsToContents()
            self.result_table.show()
            self.result.show()
        
        else:
            self.result.setText(&#34;Error Occurred. Check Input and Try Again.&#34;)
            self.result.show()

    # TODO: combine with minimize function
    @QtCore.Slot()
    def optimize(self):
        pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="scrilla.gui.widgets.PortfolioWidget" href="widgets.html#scrilla.gui.widgets.PortfolioWidget">PortfolioWidget</a></li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="scrilla.gui.functions.OptimizerWidget.minimize"><code class="name flex">
<span>def <span class="ident">minimize</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@QtCore.Slot()
def minimize(self):
    if self.result_table.isVisible():
        self.reset_table()

    if self.result.isVisible():
        self.result.clear()

    user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
    no_symbols = len(user_symbols)

    if no_symbols &gt; 1:
        investment = self.portfolio_value.text()

        logger.debug(f&#39;Optimizing Portfolio : {user_symbols}.&#39;)
        this_portfolio = portfolio.Portfolio(tickers=user_symbols)
        allocation = optimizer.optimize_portfolio_variance(portfolio=this_portfolio)
        
        logger.debug(formats.format_allocation_profile_title(allocation, this_portfolio))
        self.result.setText(formats.format_allocation_profile_title(allocation, this_portfolio))

        self.result_table.setRowCount(no_symbols)
        self.result_table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
        self.result_table.setVerticalHeaderLabels(user_symbols)
        
        if not investment:
            self.result_table.setColumnCount(1)
            labels = [&#39;Allocation&#39;]
        else:
            self.result_table.setColumnCount(2)
            labels = [&#39;Allocation&#39;, &#39;Shares&#39;]
            shares = this_portfolio.calculate_approximate_shares(allocation, float(investment))

        self.result_table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
        self.result_table.setHorizontalHeaderLabels(labels)
        self.result_table.horizontalHeader().setStretchLastSection(True)


        for i in range(no_symbols):
            this_allocation = allocation[i]
            formatted_allocation = str(100*this_allocation)[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
            item = QtWidgets.QTableWidgetItem(formatted_allocation)
            item.setTextAlignment(QtCore.Qt.AlignHCenter)
            self.result_table.setItem(i, 0, item)
            if investment:
                share_item = QtWidgets.QTableWidgetItem(str(shares[i]))
                share_item.setTextAlignment(QtCore.Qt.AlignHCenter)
                self.result_table.setItem(i, 1, share_item)
        
        self.result_table.resizeColumnsToContents()
        self.result_table.show()
        self.result.show()
    
    else:
        self.result.setText(&#34;Error Occurred. Check Input and Try Again.&#34;)
        self.result.show()</code></pre>
</details>
</dd>
<dt id="scrilla.gui.functions.OptimizerWidget.optimize"><code class="name flex">
<span>def <span class="ident">optimize</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@QtCore.Slot()
def optimize(self):
    pass</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="scrilla.gui.functions.RiskReturnWidget"><code class="flex name class">
<span>class <span class="ident">RiskReturnWidget</span></span>
</code></dt>
<dd>
<div class="desc"><p>QWidget(parent: QWidget = None, flags: Union[Qt.WindowFlags, Qt.WindowType] = Qt.WindowFlags())</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class RiskReturnWidget(CompositeWidget):
    def __init__(self):
        super().__init__(widget_title=&#34;Risk-Return Profile Over Last 100 Days&#34;, button_msg=&#34;Calculate Profile&#34;, 
                            calculate_function=self.calculate, display_function=self.display)

    @QtCore.Slot()
    def calculate(self):
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        no_symbols = len(user_symbols)

        self.table.setRowCount(no_symbols)
        self.table.setColumnCount(2)
        self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
        self.table.setHorizontalHeaderLabels([&#39;Risk&#39;,&#39;Return&#39;])
        self.table.horizontalHeader().setStretchLastSection(True)
        self.table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
        self.table.setVerticalHeaderLabels(user_symbols)

        for symbol in user_symbols:
            logger.debug(f&#39;Calculating {symbol} Risk-Return Profile&#39;)
            stats = statistics.calculate_moment_risk_return(symbol)
            if stats:
                formatted_ret = str(100*stats[&#39;annual_return&#39;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                formatted_vol = str(100*stats[&#39;annual_volatility&#39;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
                
                logger.debug(f&#39;(return, vol)_{symbol} = ({formatted_ret}, {formatted_vol})&#39;)

                ret_item = QtWidgets.QTableWidgetItem(formatted_ret)
                ret_item.setTextAlignment(QtCore.Qt.AlignHCenter)
                vol_item = QtWidgets.QTableWidgetItem(formatted_vol)
                vol_item.setTextAlignment(QtCore.Qt.AlignHCenter)
                
                self.table.setItem(user_symbols.index(symbol), 0, vol_item)
                self.table.setItem(user_symbols.index(symbol), 1, ret_item)
            else: 
                self.error_message.show()
                return False

        self.table.resizeColumnsToContents()
        self.table.show()
    
    @QtCore.Slot()
    def display(self):
        if self.displayed:
            self.layout.removeWidget(self.figure)
            self.figure.deleteLater()
            self.figure = None
            time.sleep(1)
        user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
        profiles = []
        for symbol in user_symbols:
            profiles.append(statistics.calculate_moment_risk_return(symbol))

        figure = plotter.plot_profiles(symbols=user_symbols, profiles=profiles, show=False)
        self.figure = figure
        self.right_layout.insertWidget(1, self.figure, 1)
        self.displayed = True</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="scrilla.gui.widgets.CompositeWidget" href="widgets.html#scrilla.gui.widgets.CompositeWidget">CompositeWidget</a></li>
<li><a title="scrilla.gui.widgets.SymbolWidget" href="widgets.html#scrilla.gui.widgets.SymbolWidget">SymbolWidget</a></li>
<li>PyQt5.QtWidgets.QWidget</li>
<li>PyQt5.QtCore.QObject</li>
<li>sip.wrapper</li>
<li>PyQt5.QtGui.QPaintDevice</li>
<li>sip.simplewrapper</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="scrilla.gui.functions.RiskReturnWidget.calculate"><code class="name flex">
<span>def <span class="ident">calculate</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@QtCore.Slot()
def calculate(self):
    user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
    no_symbols = len(user_symbols)

    self.table.setRowCount(no_symbols)
    self.table.setColumnCount(2)
    self.table.setHorizontalHeader(QtWidgets.QHeaderView(QtCore.Qt.Horizontal))
    self.table.setHorizontalHeaderLabels([&#39;Risk&#39;,&#39;Return&#39;])
    self.table.horizontalHeader().setStretchLastSection(True)
    self.table.setVerticalHeader(QtWidgets.QHeaderView(QtCore.Qt.Vertical))
    self.table.setVerticalHeaderLabels(user_symbols)

    for symbol in user_symbols:
        logger.debug(f&#39;Calculating {symbol} Risk-Return Profile&#39;)
        stats = statistics.calculate_moment_risk_return(symbol)
        if stats:
            formatted_ret = str(100*stats[&#39;annual_return&#39;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
            formatted_vol = str(100*stats[&#39;annual_volatility&#39;])[:constants[&#39;SIG_FIGS&#39;]]+&#34;%&#34;
            
            logger.debug(f&#39;(return, vol)_{symbol} = ({formatted_ret}, {formatted_vol})&#39;)

            ret_item = QtWidgets.QTableWidgetItem(formatted_ret)
            ret_item.setTextAlignment(QtCore.Qt.AlignHCenter)
            vol_item = QtWidgets.QTableWidgetItem(formatted_vol)
            vol_item.setTextAlignment(QtCore.Qt.AlignHCenter)
            
            self.table.setItem(user_symbols.index(symbol), 0, vol_item)
            self.table.setItem(user_symbols.index(symbol), 1, ret_item)
        else: 
            self.error_message.show()
            return False

    self.table.resizeColumnsToContents()
    self.table.show()</code></pre>
</details>
</dd>
<dt id="scrilla.gui.functions.RiskReturnWidget.display"><code class="name flex">
<span>def <span class="ident">display</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@QtCore.Slot()
def display(self):
    if self.displayed:
        self.layout.removeWidget(self.figure)
        self.figure.deleteLater()
        self.figure = None
        time.sleep(1)
    user_symbols = helper.strip_string_array(self.symbol_input.text().upper().split(&#34;,&#34;))
    profiles = []
    for symbol in user_symbols:
        profiles.append(statistics.calculate_moment_risk_return(symbol))

    figure = plotter.plot_profiles(symbols=user_symbols, profiles=profiles, show=False)
    self.figure = figure
    self.right_layout.insertWidget(1, self.figure, 1)
    self.displayed = True</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="scrilla.gui" href="index.html">scrilla.gui</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="scrilla.gui.functions.CorrelationWidget" href="#scrilla.gui.functions.CorrelationWidget">CorrelationWidget</a></code></h4>
<ul class="">
<li><code><a title="scrilla.gui.functions.CorrelationWidget.calculate_table" href="#scrilla.gui.functions.CorrelationWidget.calculate_table">calculate_table</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="scrilla.gui.functions.EfficientFrontierWidget" href="#scrilla.gui.functions.EfficientFrontierWidget">EfficientFrontierWidget</a></code></h4>
<ul class="">
<li><code><a title="scrilla.gui.functions.EfficientFrontierWidget.display" href="#scrilla.gui.functions.EfficientFrontierWidget.display">display</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="scrilla.gui.functions.MovingAverageWidget" href="#scrilla.gui.functions.MovingAverageWidget">MovingAverageWidget</a></code></h4>
<ul class="">
<li><code><a title="scrilla.gui.functions.MovingAverageWidget.display" href="#scrilla.gui.functions.MovingAverageWidget.display">display</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="scrilla.gui.functions.OptimizerWidget" href="#scrilla.gui.functions.OptimizerWidget">OptimizerWidget</a></code></h4>
<ul class="">
<li><code><a title="scrilla.gui.functions.OptimizerWidget.minimize" href="#scrilla.gui.functions.OptimizerWidget.minimize">minimize</a></code></li>
<li><code><a title="scrilla.gui.functions.OptimizerWidget.optimize" href="#scrilla.gui.functions.OptimizerWidget.optimize">optimize</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="scrilla.gui.functions.RiskReturnWidget" href="#scrilla.gui.functions.RiskReturnWidget">RiskReturnWidget</a></code></h4>
<ul class="">
<li><code><a title="scrilla.gui.functions.RiskReturnWidget.calculate" href="#scrilla.gui.functions.RiskReturnWidget.calculate">calculate</a></code></li>
<li><code><a title="scrilla.gui.functions.RiskReturnWidget.display" href="#scrilla.gui.functions.RiskReturnWidget.display">display</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>