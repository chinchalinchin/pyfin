SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"

# TODO: FIGURE OUT HOW TO MOUNT VOLUMES?
# TODO: ALLOW TRAFFIC OUTSIDE OF CONTAINER AND BACK INTO IT.

if [ "$1" == "-build" ]
then
    docker build -t 'pynance:latest' $SCRIPT_DIR/..
else
    cd $SCRIPT_DIR/..
    docker run --env-file=$SCRIPT_DIR/../.env -e ENVIRONMENT="container" pynance:latest $@
    # docker run -i --env-file=$SCRIPT_DIR/../.env \
        # -e ENVIRONMENT="container" \
        # --mount source=./cache,destination=/home/cache \
        # --mount source=./static,destination=/home/static \
        # pynance:latest $@
fi